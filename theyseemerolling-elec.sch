EESchema Schematic File Version 4
EELAYER 29 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 10
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 8450 1250 2300 1900
U 5B06B79D
F0 "DualDCDriver" 50
F1 "DualDCDriver.sch" 50
F2 "PowerVCC" I L 8450 1550 50 
F3 "PowerGND" I L 8450 1650 50 
F4 "IN1_A" I L 8450 1950 50 
F5 "IN2_A" I L 8450 2050 50 
F6 "EN_A" I L 8450 2150 50 
F7 "IN1_B" I L 8450 2500 50 
F8 "IN2_B" I L 8450 2600 50 
F9 "EN_B" I L 8450 2700 50 
F10 "M1+" I R 10750 1800 50 
F11 "M1-" I R 10750 1900 50 
F12 "M2+" I R 10750 2100 50 
F13 "M2-" I R 10750 2200 50 
F14 "Sense_B" I L 8450 2800 50 
F15 "Sense_A" I L 8450 2250 50 
F16 "Sense_B_Fault" I L 8450 2900 50 
F17 "Sense_A_Fault" I L 8450 2350 50 
$EndSheet
$Comp
L Connector_Generic:Conn_01x02 J4
U 1 1 5B1C2A3B
P 10950 1800
F 0 "J4" H 11050 1800 50  0000 C CNN
F 1 "Conn_Mot1" H 10950 1900 50  0000 C CNN
F 2 "Connector_Phoenix_MC:PhoenixContact_MCV_1,5_2-G-3.81_1x02_P3.81mm_Vertical" H 10950 1800 50  0001 C CNN
F 3 "~" H 10950 1800 50  0001 C CNN
	1    10950 1800
	1    0    0    -1  
$EndComp
$Comp
L Connector_Generic:Conn_01x02 J5
U 1 1 5B1C2AB3
P 10950 2100
F 0 "J5" H 11050 2100 50  0000 C CNN
F 1 "Conn_Mot2" H 10950 1900 50  0000 C CNN
F 2 "Connector_Phoenix_MC:PhoenixContact_MCV_1,5_2-G-3.81_1x02_P3.81mm_Vertical" H 10950 2100 50  0001 C CNN
F 3 "~" H 10950 2100 50  0001 C CNN
	1    10950 2100
	1    0    0    -1  
$EndComp
$Sheet
S 4100 1350 2150 2500
U 5B1D328B
F0 "f3" 50
F1 "f3.sch" 50
F2 "nrst" I L 4100 2250 50 
F3 "IN1_A" I R 6250 1950 50 
F4 "IN2_A" I R 6250 2050 50 
F5 "EN_A" I R 6250 2150 50 
F6 "IN1_B" I R 6250 2500 50 
F7 "IN2_B" I R 6250 2600 50 
F8 "EN_B" I R 6250 2700 50 
F9 "Sense_A" I R 6250 2250 50 
F10 "Sense_A_Fault" I R 6250 2350 50 
F11 "Sense_B" I R 6250 2800 50 
F12 "Sense_B_Fault" I R 6250 2900 50 
F13 "Encoder_1_B" I R 6250 3400 50 
F14 "Encoder_1_A" I R 6250 3300 50 
F15 "Encoder_2_B" I R 6250 3700 50 
F16 "Encoder_2_A" I R 6250 3600 50 
F17 "CAN_TX" I L 4100 2500 50 
F18 "CAN_RX" I L 4100 2600 50 
F19 "TX_1" I L 4100 1650 50 
F20 "RX_1" I L 4100 1750 50 
F21 "TMS" I L 4100 1950 50 
F22 "TCK" I L 4100 2050 50 
F23 "ABOUT_DA_POWER" I L 4100 3300 50 
$EndSheet
$Sheet
S 1950 3600 1300 1050
U 5B1D7C42
F0 "power_regul" 50
F1 "power_regul.sch" 50
F2 "Power" I R 3250 4450 50 
F3 "~IS_POWERED" I R 3250 3750 50 
$EndSheet
$Comp
L power:+3.3V #PWR0106
U 1 1 5B1DF755
P 2000 3000
F 0 "#PWR0106" H 2000 2850 50  0001 C CNN
F 1 "+3.3V" V 2015 3128 50  0000 L CNN
F 2 "" H 2000 3000 50  0001 C CNN
F 3 "" H 2000 3000 50  0001 C CNN
	1    2000 3000
	0    1    1    0   
$EndComp
$Comp
L power:+5V #PWR0107
U 1 1 5B1DF7FF
P 2000 3200
F 0 "#PWR0107" H 2000 3050 50  0001 C CNN
F 1 "+5V" V 2015 3328 50  0000 L CNN
F 2 "" H 2000 3200 50  0001 C CNN
F 3 "" H 2000 3200 50  0001 C CNN
	1    2000 3200
	0    1    1    0   
$EndComp
$Comp
L power:VCC #PWR0108
U 1 1 5B1DFAE4
P 3500 4450
F 0 "#PWR0108" H 3500 4300 50  0001 C CNN
F 1 "VCC" V 3517 4578 50  0000 L CNN
F 2 "" H 3500 4450 50  0001 C CNN
F 3 "" H 3500 4450 50  0001 C CNN
	1    3500 4450
	0    1    1    0   
$EndComp
$Comp
L power:VCC #PWR0109
U 1 1 5B1E02E0
P 8200 1450
F 0 "#PWR0109" H 8200 1300 50  0001 C CNN
F 1 "VCC" H 8217 1623 50  0000 C CNN
F 2 "" H 8200 1450 50  0001 C CNN
F 3 "" H 8200 1450 50  0001 C CNN
	1    8200 1450
	1    0    0    -1  
$EndComp
Wire Wire Line
	8200 1450 8200 1550
Wire Wire Line
	8200 1550 8450 1550
Wire Wire Line
	8450 1950 6250 1950
Wire Wire Line
	6250 2050 8450 2050
Wire Wire Line
	8450 2150 6250 2150
Wire Wire Line
	6250 2500 8450 2500
Wire Wire Line
	8450 2600 6250 2600
$Comp
L power:GND #PWR0110
U 1 1 5B1E0D0A
P 8200 1750
F 0 "#PWR0110" H 8200 1500 50  0001 C CNN
F 1 "GND" H 8205 1577 50  0000 C CNN
F 2 "" H 8200 1750 50  0001 C CNN
F 3 "" H 8200 1750 50  0001 C CNN
	1    8200 1750
	1    0    0    -1  
$EndComp
Wire Wire Line
	8200 1750 8200 1650
Wire Wire Line
	8200 1650 8450 1650
Wire Wire Line
	8450 2700 6250 2700
Wire Wire Line
	6250 2250 8450 2250
Wire Wire Line
	8450 2350 6250 2350
Wire Wire Line
	6250 2800 8450 2800
Wire Wire Line
	8450 2900 6250 2900
$Sheet
S 700  2400 1050 1400
U 5B230D4C
F0 "CAN" 50
F1 "CAN.sch" 50
F2 "CAN_RX" I R 1750 2600 50 
F3 "CAN_TX" I R 1750 2500 50 
F4 "+7V_CAN" I R 1750 3400 50 
F5 "+3V3" I R 1750 3000 50 
F6 "+5V" I R 1750 3200 50 
F7 "NRST" I R 1750 2750 50 
$EndSheet
Text Notes 4900 900  0    50   ~ 0
TODO add protections
Wire Wire Line
	2000 3000 1750 3000
Wire Wire Line
	1750 3200 2000 3200
Wire Wire Line
	3500 4450 3250 4450
Wire Wire Line
	3250 3750 3500 3750
Wire Wire Line
	3500 3750 3500 3300
Text Notes 4350 2100 0    50   ~ 0
SWCLK
Text Notes 4350 2000 0    50   ~ 0
SWDIO
$Comp
L Connector_Generic:Conn_01x04 J1
U 1 1 5BAE70F3
P 9800 3600
F 0 "J1" H 9880 3592 50  0000 L CNN
F 1 "Conn_Encoder1" H 9880 3501 50  0000 L CNN
F 2 "Connector_JST:JST_PH_B4B-PH-K_1x04_P2.00mm_Vertical" H 9800 3600 50  0001 C CNN
F 3 "~" H 9800 3600 50  0001 C CNN
	1    9800 3600
	1    0    0    -1  
$EndComp
$Comp
L Connector_Generic:Conn_01x04 J6
U 1 1 5BAE7214
P 9800 4200
F 0 "J6" H 9880 4192 50  0000 L CNN
F 1 "Conn_Encoder2" H 9880 4101 50  0000 L CNN
F 2 "Connector_JST:JST_PH_B4B-PH-K_1x04_P2.00mm_Vertical" H 9800 4200 50  0001 C CNN
F 3 "~" H 9800 4200 50  0001 C CNN
	1    9800 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	4100 2500 1750 2500
Wire Wire Line
	4100 2600 1750 2600
Wire Wire Line
	4100 3300 3500 3300
$Comp
L power:+5V #PWR0105
U 1 1 5BAF0E04
P 9500 4100
F 0 "#PWR0105" H 9500 3950 50  0001 C CNN
F 1 "+5V" V 9515 4228 50  0000 L CNN
F 2 "" H 9500 4100 50  0001 C CNN
F 3 "" H 9500 4100 50  0001 C CNN
	1    9500 4100
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0119
U 1 1 5BAF0E7D
P 9600 4300
F 0 "#PWR0119" H 9600 4050 50  0001 C CNN
F 1 "GND" V 9605 4172 50  0000 R CNN
F 2 "" H 9600 4300 50  0001 C CNN
F 3 "" H 9600 4300 50  0001 C CNN
	1    9600 4300
	0    1    1    0   
$EndComp
$Comp
L power:+5V #PWR0120
U 1 1 5BAF1245
P 9500 3500
F 0 "#PWR0120" H 9500 3350 50  0001 C CNN
F 1 "+5V" V 9515 3628 50  0000 L CNN
F 2 "" H 9500 3500 50  0001 C CNN
F 3 "" H 9500 3500 50  0001 C CNN
	1    9500 3500
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0121
U 1 1 5BAF124B
P 9600 3700
F 0 "#PWR0121" H 9600 3450 50  0001 C CNN
F 1 "GND" V 9605 3572 50  0000 R CNN
F 2 "" H 9600 3700 50  0001 C CNN
F 3 "" H 9600 3700 50  0001 C CNN
	1    9600 3700
	0    1    1    0   
$EndComp
Wire Wire Line
	9600 3600 9100 3600
Wire Wire Line
	7500 3300 6250 3300
Wire Wire Line
	7400 3800 7400 3400
Wire Wire Line
	7400 3400 6250 3400
Wire Wire Line
	6250 3600 7200 3600
Wire Wire Line
	7200 3600 7200 4100
Wire Wire Line
	6250 3700 7100 3700
$Comp
L PhenixRobotik:Conn_Debug J3
U 1 1 5BAFC27B
P 3050 1850
F 0 "J3" H 3050 1850 50  0000 C CNN
F 1 "Conn_SWD_UART" H 3050 2400 50  0000 C CNN
F 2 "Connector_JST:JST_PH_B6B-PH-K_1x06_P2.00mm_Vertical" H 3050 1850 50  0001 C CNN
F 3 "~" H 3050 1850 50  0001 C CNN
	1    3050 1850
	-1   0    0    1   
$EndComp
$Comp
L Device:C C19
U 1 1 5BB5F5FE
P 10800 3650
F 0 "C19" H 10915 3696 50  0000 L CNN
F 1 "100nF" H 10915 3605 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 10838 3500 50  0001 C CNN
F 3 "~" H 10800 3650 50  0001 C CNN
	1    10800 3650
	1    0    0    -1  
$EndComp
$Comp
L Device:C C18
U 1 1 5BB5F6CF
P 10550 4250
F 0 "C18" H 10665 4296 50  0000 L CNN
F 1 "100nF" H 10665 4205 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 10588 4100 50  0001 C CNN
F 3 "~" H 10550 4250 50  0001 C CNN
	1    10550 4250
	1    0    0    -1  
$EndComp
Wire Wire Line
	9500 4100 9550 4100
Wire Wire Line
	9500 3500 9550 3500
Wire Wire Line
	9550 3500 9550 3400
Connection ~ 9550 3500
Wire Wire Line
	9550 3500 9600 3500
Wire Wire Line
	10550 4100 10550 4000
Wire Wire Line
	10550 4000 9550 4000
Wire Wire Line
	9550 4000 9550 4100
Connection ~ 9550 4100
Wire Wire Line
	9550 4100 9600 4100
$Comp
L power:GND #PWR0156
U 1 1 5BB65DB2
P 10550 4400
F 0 "#PWR0156" H 10550 4150 50  0001 C CNN
F 1 "GND" H 10555 4227 50  0000 C CNN
F 2 "" H 10550 4400 50  0001 C CNN
F 3 "" H 10550 4400 50  0001 C CNN
	1    10550 4400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0158
U 1 1 5BB65E13
P 10800 3800
F 0 "#PWR0158" H 10800 3550 50  0001 C CNN
F 1 "GND" H 10805 3627 50  0000 C CNN
F 2 "" H 10800 3800 50  0001 C CNN
F 3 "" H 10800 3800 50  0001 C CNN
	1    10800 3800
	1    0    0    -1  
$EndComp
Wire Wire Line
	10800 3500 10800 3400
Wire Wire Line
	9550 3400 10800 3400
$Comp
L Graphic:Logo_Open_Hardware_Large LOGO1
U 1 1 5BB5225B
P 6500 5300
F 0 "LOGO1" H 6500 5800 50  0001 C CNN
F 1 "Logo_Open_Hardware_Large" H 6500 4900 50  0001 C CNN
F 2 "Symbol:OSHW-Logo_7.5x8mm_SilkScreen" H 6500 5300 50  0001 C CNN
F 3 "~" H 6500 5300 50  0001 C CNN
	1    6500 5300
	1    0    0    -1  
$EndComp
$Comp
L Graphic:Logo_Open_Hardware_Small LOGO2
U 1 1 5BB52377
P 7300 5300
F 0 "LOGO2" H 7300 5575 50  0001 C CNN
F 1 "Logo_Open_Hardware_Small" H 7300 5075 50  0001 C CNN
F 2 "PhenixRobotik:Logo_14,5mm" H 7300 5300 50  0001 C CNN
F 3 "~" H 7300 5300 50  0001 C CNN
	1    7300 5300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0151
U 1 1 5BCCA189
P 3050 1150
F 0 "#PWR0151" H 3050 900 50  0001 C CNN
F 1 "GND" H 3055 977 50  0000 C CNN
F 2 "" H 3050 1150 50  0001 C CNN
F 3 "" H 3050 1150 50  0001 C CNN
	1    3050 1150
	-1   0    0    1   
$EndComp
Wire Wire Line
	3050 1150 3050 1250
Wire Wire Line
	3350 1650 4100 1650
Wire Wire Line
	3350 1750 4100 1750
Wire Wire Line
	3350 1950 4100 1950
Wire Wire Line
	3350 2050 4100 2050
Wire Wire Line
	3350 2250 3650 2250
Wire Wire Line
	1750 2750 3650 2750
Wire Wire Line
	3650 2750 3650 2250
Connection ~ 3650 2250
Wire Wire Line
	3650 2250 4100 2250
$Comp
L Mechanical:MountingHole_Pad MK1
U 1 1 5BE0DFC4
P 4550 5350
F 0 "MK1" V 4504 5500 50  0000 L CNN
F 1 "MountingHole_Pad" V 4595 5500 50  0000 L CNN
F 2 "MountingHole:MountingHole_2.7mm_M2.5_Pad" H 4550 5350 50  0001 C CNN
F 3 "~" H 4550 5350 50  0001 C CNN
	1    4550 5350
	0    1    1    0   
$EndComp
$Comp
L Mechanical:MountingHole_Pad MK2
U 1 1 5BE0E013
P 4550 5550
F 0 "MK2" V 4504 5700 50  0000 L CNN
F 1 "MountingHole_Pad" V 4595 5700 50  0000 L CNN
F 2 "MountingHole:MountingHole_2.7mm_M2.5_Pad" H 4550 5550 50  0001 C CNN
F 3 "~" H 4550 5550 50  0001 C CNN
	1    4550 5550
	0    1    1    0   
$EndComp
$Comp
L Mechanical:MountingHole_Pad MK3
U 1 1 5BE0FFB8
P 4550 5750
F 0 "MK3" V 4504 5900 50  0000 L CNN
F 1 "MountingHole_Pad" V 4595 5900 50  0000 L CNN
F 2 "MountingHole:MountingHole_2.7mm_M2.5_Pad" H 4550 5750 50  0001 C CNN
F 3 "~" H 4550 5750 50  0001 C CNN
	1    4550 5750
	0    1    1    0   
$EndComp
$Comp
L Mechanical:MountingHole_Pad MK4
U 1 1 5BE0FFBE
P 4550 5950
F 0 "MK4" V 4504 6100 50  0000 L CNN
F 1 "MountingHole_Pad" V 4595 6100 50  0000 L CNN
F 2 "MountingHole:MountingHole_2.7mm_M2.5_Pad" H 4550 5950 50  0001 C CNN
F 3 "~" H 4550 5950 50  0001 C CNN
	1    4550 5950
	0    1    1    0   
$EndComp
Wire Wire Line
	4450 5350 4450 5550
Connection ~ 4450 5550
Wire Wire Line
	4450 5550 4450 5750
Connection ~ 4450 5750
Wire Wire Line
	4450 5750 4450 5950
Connection ~ 4450 5950
Wire Wire Line
	4450 5950 4450 6100
$Comp
L power:GND #PWR0168
U 1 1 5BE12036
P 4450 6100
F 0 "#PWR0168" H 4450 5850 50  0001 C CNN
F 1 "GND" H 4455 5927 50  0000 C CNN
F 2 "" H 4450 6100 50  0001 C CNN
F 3 "" H 4450 6100 50  0001 C CNN
	1    4450 6100
	1    0    0    -1  
$EndComp
$Sheet
S 1000 5000 2000 2500
U 5D4D2C8F
F0 "Sheet5D4D2C8E" 50
F1 "stm32f4.sch" 50
F2 "CAN_TX" I L 1000 5500 50 
F3 "CAN_RX" I L 1000 5600 50 
$EndSheet
$Sheet
S 7600 3400 700  200 
U 5D6C19BD
F0 "shift_enc1A" 50
F1 "5V_to_3V3.sch" 50
F2 "Input" I R 8300 3500 50 
F3 "Output" I L 7600 3500 50 
$EndSheet
$Sheet
S 7600 4000 700  200 
U 5D6D68B6
F0 "shift_enc2A" 50
F1 "5V_to_3V3.sch" 50
F2 "Input" I R 8300 4100 50 
F3 "Output" I L 7600 4100 50 
$EndSheet
Wire Wire Line
	7600 3500 7500 3500
Wire Wire Line
	7500 3500 7500 3300
Wire Wire Line
	7600 4100 7200 4100
Wire Wire Line
	7100 3700 7100 4400
$Sheet
S 8400 4300 700  200 
U 5D6D8238
F0 "shift_enc2B" 50
F1 "5V_to_3V3.sch" 50
F2 "Input" I R 9100 4400 50 
F3 "Output" I L 8400 4400 50 
$EndSheet
$Sheet
S 8400 3700 700  200 
U 5D6D0FF6
F0 "shift_enc1B" 50
F1 "5V_to_3V3.sch" 50
F2 "Input" I R 9100 3800 50 
F3 "Output" I L 8400 3800 50 
$EndSheet
Wire Wire Line
	9100 3800 9600 3800
Wire Wire Line
	9100 4400 9600 4400
Wire Wire Line
	7400 3800 8400 3800
Wire Wire Line
	7100 4400 8400 4400
Wire Wire Line
	9100 4100 9100 4200
Wire Wire Line
	9100 4200 9600 4200
Wire Wire Line
	8300 4100 9100 4100
Wire Wire Line
	9100 3500 9100 3600
Wire Wire Line
	8300 3500 9100 3500
$EndSCHEMATC
